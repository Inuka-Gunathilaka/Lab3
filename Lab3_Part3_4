#if CONFIG_FREERTOS_UNICORE
static const BaseType_t app_cpu = 0
#else
static const BaseType_t app_cpu = 1;
#endif

static const int built_in_led = 2;
unsigned int toggle_delay = 0;

void get_Serial_Input(){
  while(1){
    toggle_delay = Serial.read();
  }
  
}

void Blink_LED(){
  while(1){
    digitalWrite(built_in_led, HIGH);
    delay(toggle_delay);
    digitalWrite(built_in_led, LOW);
    delay(toggle_delay);
  }
 
}

void setup() {
  pinMode(built_in_led, OUTPUT);

  
  xTaskCreatePinnedToCore(//Tells the scheduler to run the task in one the cores
             get_Serial_Input, 
             "Get Serial Input", 
             1024, //Stack Size
             NULL, //Parameter to pass to the function
             1, //Task Priority
             NULL, //Task Handle or Pointer to check status memory usage and end if necessary
             0); //Run on CPU Core 1
             
  xTaskCreatePinnedToCore(//Tells the scheduler to run the task in one the cores
             Blink_LED, 
             "Blink LED", 
             1024, //Stack Size
             NULL, //Parameter to pass to the function
             1, //Task Priority
             NULL, //Task Handle or Pointer to check status memory usage and end if necessary
             1); //Run on CPU Core 1
}

void loop() {
  // put your main code here, to run repeatedly:

}
